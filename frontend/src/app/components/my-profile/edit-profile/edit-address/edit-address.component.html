<small><a routerLink="/myprofile/editprofile">Aperçu</a> / <a routerLink="/myprofile/editaddress">Mes Adresses</a></small>
<h2 class="p-3 text-center">Mes Adresses</h2>
<h3>Adresses de livraison</h3>
<div class="row">
    <div class="col-12">
        <div class="table-responsive">
            <table class="table table-hover">
                <!-- Label du tableau -->
                <thead>
                    <tr>
                        <th scope="col">Adresse</th>
                        <th scope="col">Ville</th>
                        <th scope="col">NPA</th>
                    </tr>
                </thead>
                <!-- Données -->
                <tbody>
                    <tr *ngFor="let shipaddr of myShipAddr">
                        <td scope="row">{{shipaddr.shippingAddress}}</td>
                        <td>{{ shipaddr.shippingCity  }}</td>
                        <td>{{ shipaddr.shippingZip }}</td>
                        <td>
                            <a class="btn btn-light" (click)="openModal(EditshippingAddressModal, shipaddr)">Modifier</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<h3>Adresses de facturation</h3>
<div class="row">
    <div class="col-12">
        <div class="table-responsive">
            <table class="table table-hover">
                <!-- Label du tableau -->
                <thead>
                    <tr>
                        <th scope="col">Adresse</th>
                        <th scope="col">Ville</th>
                        <th scope="col">NPA</th>
                    </tr>
                </thead>
                <!-- Données -->
                <tbody>
                    <tr *ngFor="let billaddr of myBillAddr">
                        <td scope="row">{{billaddr.billingAddress}}</td>
                        <td>{{ billaddr.billingCity  }}</td>
                        <td>{{ billaddr.billingZip }}</td>
                        <td>
                            <a class="btn btn-light" (click)="openModal(EditBillingAddressModal, billaddr)">Modifier</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<ng-template #EditshippingAddressModal let-modal>
    <div class="modal-header">
        <h6 class="modal-title" id="showProfileLabel">
                <svg class="f-icon " aria-hidden="true" role="img" focusable="false" height="20"
                    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" id="icon_i_027_location">
                    <path fill="currentColor" d="M16 3.1a7.04 7.04 0 017.03 7.04c0 4.47-4.66 11.77-7.03 15.75-4-6.74-7.03-11.9-7.03-15.75A7.04
                                 7.04 0 0116 3.1zM16 0C10.4 0 5.86 4.54 5.86 10.14S10.3 22.24 16 32c5.7-9.76 10.14-16.27 10.14-21.86S21.6
                                  0 16 0zm0 6.52a3.52 3.52 0 100 7.04 3.52 3.52 0 000-7.04z">
                    </path>
                </svg>
                Adresse de livraison</h6>
        <button type="button" class="close" (click)="modal.dismiss()" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>

    <div class="modal-body p-3 ">
        <form (ngSubmit)="onSubmitShippingAddresse()" [formGroup]="editShippingAddrForm" class="form">
        <div>
            <!-- Adresse-->
            <div class="form-group">
                <label for="ShippingAddress">Rue, n° *</label>
                <input id="shippingAddress" type="text" formControlName="shippingAddress" class="form-control"
                    [ngClass]="{ 'is-invalid': submitted && f.shippingAddress.errors || f.shippingAddress.touched && f.shippingAddress.errors}" />
            </div>
            <!-- Ville-->
            <div class="row">
                <div class="col-sm">
                    <div class="form-group">
                        <label for="shippingCity">Ville *</label>
                        <input type="text" maxlength="100" formControlName="shippingCity" id="shippingCity"
                            class="form-control"
                            [ngClass]="{ 'is-invalid': submitted && f.shippingCity.errors  || f.shippingCity.touched && f.shippingCity.errors}" />
                    </div>
                </div>
                <!-- NPA-->
                <div class="col-sm">
                    <div class="form-group">
                        <label for="shippingZip">Code Postal *</label>
                        <input maxlength="4" formControlName="shippingZip" class="form-control" id="shippingZip"
                            [ngClass]="{ 'is-invalid': submitted && f.shippingZip.errors ||
                                                     f.shippingZip.errors && f.shippingZip.hasError('pattern') || f.shippingZip.touched && f.shippingZip.errors ||
                                                     f.shippingZip.touched && f.shippingZip.hasError('minLength')}" />
                        <div class="invalid-feedback"
                            *ngIf="f.shippingZip.touched && f.shippingZip.hasError('pattern') ">
                            Uniquement des chiffres</div>
                        <div class="invalid-feedback"
                            *ngIf="f.shippingZip.touched && f.shippingZip.value.length<4 && f.shippingZip.value.length!=0 ">
                            Au moins 4 chiffres</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="form-group pb-3 mt-3 text-center">
            <button [disabled]="loading" class="btn btn-primary btn-lg w-60 " >
                <span *ngIf="loading" class="spinner-border spinner-border-sm mr-1"></span>
                Enregistrer
            </button>
        </div>
        <div *ngIf="FormError" class="p-3 mb-2 bg-danger text-white text-center">{{FormErrorMessage}}</div>
    </form>
    </div>
</ng-template>
<ng-template #EditBillingAddressModal let-modal>
    <div class="modal-header">
        <h6 class="modal-title" id="showProfileLabel">
            <svg class="f-icon " aria-hidden="true" role="img" focusable="false" height="20"
                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" id="icon_i_017_postal_card">
                <path fill="currentColor"
                    d="M16.12 15.24L5.96 18.35l.4 1.33 10.16-3.12-.4-1.32zM27.25 4.08L32 19.57 4.75 27.92
                             0 12.43l27.25-8.35zm2.16 14.11L25.88 6.67 2.59 13.81l3.53 11.52 23.29-7.14zM7.3
                              22.77l10.16-3.11-.4-1.32-10.16 3.1.4 1.33zm18.76-11.6l-1-3.24-2.4.74.99 3.24 2.4-.74z">
                </path>
            </svg>
            Adresse de facturation</h6>
        <button type="button" class="close" (click)="modal.dismiss()" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>

    <div class="modal-body p-3 ">
        <form (ngSubmit)="onSubmitBillingAddresse()" [formGroup]="editBillingAddrForm" class="form">
        <div>
            
            <div>
                <!-- Adresse-->
                <div class="form-group">
                    <label for="billingAddress">Rue, n° *</label>
                    <input id="billingAddress" type="text" formControlName="billingAddress" class="form-control"
                        [ngClass]="{ 'is-invalid': submitted && f2.billingAddress.errors ||f2.billingAddress.touched && f2.billingAddress.errors}" />
                </div>
                <!-- Ville-->
                <div class="row">
                    <div class="col-sm">
                        <div class="form-group">
                            <label for="billingCity">Ville *</label>
                            <input type="text" maxlength="100" formControlName="billingCity" id="billingCity"
                                class="form-control"
                                [ngClass]="{ 'is-invalid': submitted && f2.billingCity.errors ||f2.billingCity.touched && f2.billingCity.errors }" />
                        </div>
                    </div>
                    <!-- NPA-->
                    <div class="col-sm">
                        <div class="form-group">
                            <label for="billingZip">Code Postal *</label>
                            <input maxlength="4" formControlName="billingZip" id="billingZip" class="form-control"
                                [ngClass]="{ 'is-invalid': submitted && f.billingZip.errors ||
                                         f2.billingZip.touched && f2.billingZip.hasError('pattern')
                                         || f2.billingZip.touched && f2.billingZip.errors ||
                                         f2.billingZip.touched && f2.billingZip.hasError('minLength')}" />
                            <div class="invalid-feedback" *ngIf="f2.billingZip.touched && f2.billingZip.hasError('pattern') ||
                                     f2.billingZip.errors && f2.billingZip.hasError('pattern')">
                                Uniquement des chiffres</div>
                            <div class="invalid-feedback"
                                *ngIf="f2.billingZip.touched && f2.billingZip.value.length<4 && f2.billingZip.value.length!=0 ">
                                Au moins 4 chiffres</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="form-group pb-3 mt-3 text-center">
            <button [disabled]="loading" class="btn btn-primary btn-lg w-60 ">
                <span *ngIf="loading" class="spinner-border spinner-border-sm mr-1"></span>
                Enregistrer
            </button>
        </div>
        <div *ngIf="FormError" class="p-3 mb-2 bg-danger text-white text-center">{{FormErrorMessage}}</div>
    </form>
    </div>
</ng-template>